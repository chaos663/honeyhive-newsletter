---
layout: default
---
<section class="hero">
  <h1 class="hero-title">HoneyHive Newsletter</h1>
  <p class="hero-sub">Daily tech news curated by HoneyHive</p>
</section>

<!-- Mobile Category Bar -->
<div class="category-mobile-bar">
  <button class="category-chip active" data-filter="all">전체({{ site.posts.size }})</button>
  {% assign tag_counts = "" %}
  {% for post in site.posts %}
    {% for tag in post.tags %}
      {% assign tag_counts = tag_counts | append: tag | append: "," %}
    {% endfor %}
  {% endfor %}
  {% assign tag_array = tag_counts | split: "," | sort %}
  {% assign prev_tag = "" %}
  {% assign count = 0 %}
  {% assign unique_tags = "" %}
  {% for tag in tag_array %}
    {% if tag == "" %}{% continue %}{% endif %}
    {% if tag != prev_tag %}
      {% if prev_tag != "" %}
        {% assign unique_tags = unique_tags | append: prev_tag | append: ":" | append: count | append: ";" %}
      {% endif %}
      {% assign count = 1 %}
    {% else %}
      {% assign count = count | plus: 1 %}
    {% endif %}
    {% assign prev_tag = tag %}
  {% endfor %}
  {% if prev_tag != "" %}
    {% assign unique_tags = unique_tags | append: prev_tag | append: ":" | append: count | append: ";" %}
  {% endif %}
  {% assign tag_pairs = unique_tags | split: ";" %}
  {% for pair in tag_pairs %}
    {% if pair == "" %}{% continue %}{% endif %}
    {% assign parts = pair | split: ":" %}
    <button class="category-chip" data-filter="{{ parts[0] }}">{{ parts[0] }}({{ parts[1] }})</button>
  {% endfor %}
</div>

<div class="home-layout">
  <!-- Desktop Category Sidebar -->
  <aside class="category-sidebar">
    <nav class="category-nav">
      <div class="category-title">카테고리</div>
      <ul class="category-list">
        <li class="category-item">
          <button class="category-link active" data-filter="all">
            <span>전체</span>
            <span class="category-count">{{ site.posts.size }}</span>
          </button>
        </li>
        {% for pair in tag_pairs %}
          {% if pair == "" %}{% continue %}{% endif %}
          {% assign parts = pair | split: ":" %}
          <li class="category-item">
            <button class="category-link" data-filter="{{ parts[0] }}">
              <span>{{ parts[0] }}</span>
              <span class="category-count">{{ parts[1] }}</span>
            </button>
          </li>
        {% endfor %}
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="home-content">
    <section class="post-list" id="post-list">
      {% for post in site.posts %}
      <a href="{{ post.url | relative_url }}" class="post-card" data-tags="{% for tag in post.tags %}{{ tag }}{% unless forloop.last %},{% endunless %}{% endfor %}">
        <div class="post-card-inner">
          <div class="post-card-meta-top">
            <time class="post-date" datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
            {% for tag in post.tags %}
            <span class="post-tag tag-{{ tag }}">{{ tag }}</span>
            {% endfor %}
          </div>
          {% if post.series %}
          <span class="post-series">{{ post.series }}</span>
          {% endif %}
          <h2 class="post-card-title">{{ post.title | escape }}</h2>
          <p class="post-card-excerpt">{{ post.excerpt | strip_html | truncatewords: 40 }}</p>
          <div class="post-card-footer">
            {% if post.news_count %}
            <span class="post-news-count">{{ post.news_count }}개 뉴스</span>
            {% endif %}
            <span class="read-more">Read more &rarr;</span>
          </div>
        </div>
      </a>
      {% endfor %}

      {% if site.posts.size == 0 %}
      <div class="empty-state">
        <p>No posts yet. Stay tuned!</p>
      </div>
      {% endif %}
    </section>

    <!-- Pagination -->
    <nav class="pagination" id="pagination" aria-label="페이지 탐색"></nav>
  </div>
</div>

<script>
(function() {
  var PER_PAGE = 3;
  var currentFilter = 'all';
  var currentPage = 1;

  var cards = Array.prototype.slice.call(document.querySelectorAll('#post-list .post-card'));
  var pagination = document.getElementById('pagination');
  var allCategoryBtns = Array.prototype.slice.call(document.querySelectorAll('[data-filter]'));

  function getVisibleCards() {
    if (currentFilter === 'all') return cards;
    return cards.filter(function(card) {
      var tags = (card.getAttribute('data-tags') || '').split(',');
      return tags.indexOf(currentFilter) !== -1;
    });
  }

  function render() {
    var visible = getVisibleCards();
    var totalPages = Math.max(1, Math.ceil(visible.length / PER_PAGE));
    if (currentPage > totalPages) currentPage = totalPages;

    var start = (currentPage - 1) * PER_PAGE;
    var end = start + PER_PAGE;

    cards.forEach(function(card) { card.style.display = 'none'; });
    visible.forEach(function(card, i) {
      card.style.display = (i >= start && i < end) ? '' : 'none';
    });

    renderPagination(totalPages);
  }

  function renderPagination(totalPages) {
    if (totalPages <= 1) { pagination.innerHTML = ''; return; }

    var html = '';
    if (currentPage > 1) {
      html += '<button class="pagination-link pagination-prev" data-page="' + (currentPage - 1) + '">&laquo; 이전</button>';
    }
    for (var i = 1; i <= totalPages; i++) {
      html += '<button class="pagination-link' + (i === currentPage ? ' active' : '') + '" data-page="' + i + '">' + i + '</button>';
    }
    if (currentPage < totalPages) {
      html += '<button class="pagination-link pagination-next" data-page="' + (currentPage + 1) + '">다음 &raquo;</button>';
    }
    pagination.innerHTML = html;
  }

  // Category filter
  allCategoryBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      var filter = this.getAttribute('data-filter');
      currentFilter = filter;
      currentPage = 1;

      allCategoryBtns.forEach(function(b) { b.classList.remove('active'); });
      allCategoryBtns.forEach(function(b) {
        if (b.getAttribute('data-filter') === filter) b.classList.add('active');
      });

      render();
    });
  });

  // Pagination click
  pagination.addEventListener('click', function(e) {
    var btn = e.target.closest('[data-page]');
    if (!btn) return;
    currentPage = parseInt(btn.getAttribute('data-page'), 10);
    render();
    document.getElementById('post-list').scrollIntoView({ behavior: 'smooth', block: 'start' });
  });

  render();
})();
</script>
